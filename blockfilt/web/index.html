<!DOCTYPE html>
<html>
<head> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="flot/flot/jquery.flot.js"></script>
<script>

var toTuple = function(x, y) {

   var result = new Array();
   for (var i = 0; i < x.length; i++) {
        result[i] = [x[i], y[i]]
   }
   
   return result;
}


$(document).ready(function(){
  $("button").click(function(){
    $.get("run?filter1=5&filter2=6&filter3=50&filter4=100&dsamp=1&dft_window_top=170&dft_window_bot=240&taper_percent=10&model=200,1,204,2,216,1,220,3",function(data,status){
      //alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
      
      var topleft1 = toTuple(data.trace_times, data.filtered_blocks);
      var topleft2 = toTuple(data.intimes, data.impedances);
       $.plot($("#top_left"),[
   {
     label: "Filtered Blocks",
     data: topleft1,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Impedances",
     data: topleft2,
     lines: {show: true},
     points: {show: true}   
   }
   ]);
   
   var topright1a = toTuple(data.freqs, data.spectrum_blocks);
   var topright1b = toTuple(data.freqs, data.windowed_blk_spectrum);
   
   
    $.plot($("#top_right"),[
   {
     label: "Amplitude Spectra",
     data: topright1a,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Sampled Window DFT Spectrum",
     data: topright1b,
     lines: {show: true},
     points: {show: false}   
   }
   ]);
 
  
 
   
    var bottomleft1 = toTuple(data.intimes, data.rcs);
    var bottomleft2 = toTuple(data.trace_times, data.filtered_rc);
 
    $.plot($("#bottom_left"),[
   
   {
     label: "Filtered Reflectivity",
     data: bottomleft2,
     lines: {show: true},
     points: {show: true}   
   },
   {
     label: "Reflectivity",
     data: bottomleft1,
     lines: {show: true},
     points: {show: true}
   }
   ]);
   
   
   
   var bottomright1 = toTuple(data.freqs, data.spectrum_rc);
   var bottomright2 = toTuple(data.freqs, data.windowed_rc_spectrum);
   
    $.plot($("#bottom_right"),[
   {
     label: "Analytical Spectrum",
     data: bottomright1,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Sampled Window DFT Spectrum",
     data: bottomright2,
     lines: {show: true},
     points: {show: true}   
   }
   ]);
      
      
     }); 
      
 
  });
  
 
});


</script>
</head>
<body>

<button>Run</button>

<div id="top_left" style="width:800px;height:100px;"></div>
<div id="bottom_left" style="width:800px;height:100px;"></div>
<div id="top_right" style="width:700px;height:100px;"></div>
<div id="bottom_right" style="width:700px;height:100px;"></div>

</body>
</html>
