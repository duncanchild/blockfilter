<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="flot/flot/jquery.flot.js"></script>
<script>

$(document).ready(function(){
  $("button").click(function(){
    $.get("run?filter1=5&filter2=6&filter3=50&filter4=100&dsamp=1&dft_window_top=170&dft_window_bot=240&taper_percent=10&model=200,1,204,2,216,1,220,3",function(data,status){
      alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
    
      //console.log(" nsamp " + data.nsamp);
      //console.log(" firsdt time " + data.trace_times[0]);
      //alert("nsamp " + results.nsamp);
      
      trace_times = data.trace_times;
      filtered_blocks = data.filtered_blocks;
      
      var topleft1 = new Array();
      for (var i = 0; i < trace_times.length; i++) {
        topleft1[i] = [trace_times[i], filtered_blocks[i]]
      }
      
      intimes = data.intimes;
      impedances = data.impedances;
      
      var topleft1b = new Array();
      for (var i = 0; i < impedances.length; i++) {
        topleft1b[i] = [intimes[i], impedances[i]]
      }
      
      
       $.plot($("#top_left"),[
   {
     label: "Filtered Blocks",
     data: topleft1,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Impedances",
     data: topleft1b,
     lines: {show: true},
     points: {show: true}   
   }
   ]);
   
    $.plot($("#top_right"),[
   {
     label: "Amplitude Spectra",
     data: topleft1,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Sampled Window DFT Spectrum",
     data: topleft1b,
     lines: {show: true},
     points: {show: false}   
   }
   ]);
 
    $.plot($("#bottom_left"),[
   {
     label: "Reflectivity",
     data: topleft1,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Filtered Reflectivity",
     data: topleft1b,
     lines: {show: true},
     points: {show: true}   
   }
   ]);
   
    $.plot($("#bottom_right"),[
   {
     label: "Analytical Spectrum",
     data: topleft1,
     lines: {show: true},
     points: {show: true}
   },
   {
     label: "Sampled Window DFT Spectrum",
     data: topleft1b,
     lines: {show: true},
     points: {show: true}   
   }
   ]);
      
      
     }); 
      
 
  });
  
 
});


</script>
</head>
<body>

<button>Run</button>

<div id="top_left" style="width:600px;height:100px;"></div>
<div id="bottom_left" style="width:600px;height:100px;"></div>
<div id="top_right" style="width:600px;height:100px;"></div>
<div id="bottom_right" style="width:600px;height:100px;"></div>

</body>
</html>
